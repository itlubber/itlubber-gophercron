var se=Object.defineProperty,oe=Object.defineProperties;var ie=Object.getOwnPropertyDescriptors;var U=Object.getOwnPropertySymbols;var ue=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable;var z=(e,s,o)=>s in e?se(e,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[s]=o,x=(e,s)=>{for(var o in s||(s={}))ue.call(s,o)&&z(e,o,s[o]);if(U)for(var o of U(s))re.call(s,o)&&z(e,o,s[o]);return e},T=(e,s)=>oe(e,ie(s));import{a as de,cP as ce,c as n,r as p,w as R,h as F,Q as C,g as me,cQ as A,cR as ve,Y as fe,j as K,u as J,l as q,E as j,x as l,I as k,z as L,s as c,q as V,L as ge,f as we,J as W,F as Y,cS as be,N as ye,m as xe}from"./index.c00bb6a6.js";import{Q as he}from"./QInnerLoading.56c14084.js";import{Q as _e}from"./QInput.b008bd08.js";import{u as pe,a as Se}from"./focus-manager.51458ac1.js";import{b as ke}from"./format.865294d5.js";import{_ as G}from"./ModifyBox.666a5c22.js";import{b as Ve,a as Ce,Q as Pe}from"./QDialog.8deced28.js";import{Q as Be}from"./QCardActions.ca419d19.js";import{C as $e}from"./ClosePopup.d0d9f96f.js";import{f as Fe}from"./datetime.561112b0.js";import{g as De}from"./utils.3d38ee44.js";import"./use-key-composition.d99d77ec.js";import"./QForm.9ae98661.js";function Q(e,s){return[!0,!1].includes(e)?e:s}var Ne=de({name:"QPagination",props:T(x({},pe),{modelValue:{type:Number,required:!0},min:{type:[Number,String],default:1},max:{type:[Number,String],required:!0},maxPages:{type:[Number,String],default:0,validator:e=>(typeof e=="string"?parseInt(e,10):e)>=0},inputStyle:[Array,String,Object],inputClass:[Array,String,Object],size:String,disable:Boolean,input:Boolean,iconPrev:String,iconNext:String,iconFirst:String,iconLast:String,toFn:Function,boundaryLinks:{type:Boolean,default:null},boundaryNumbers:{type:Boolean,default:null},directionLinks:{type:Boolean,default:null},ellipses:{type:Boolean,default:null},ripple:{type:[Boolean,Object],default:null},round:Boolean,rounded:Boolean,flat:Boolean,outline:Boolean,unelevated:Boolean,push:Boolean,glossy:Boolean,color:{type:String,default:"primary"},textColor:String,activeDesign:{type:String,default:"",values:e=>e===""||ce.includes(e)},activeColor:String,activeTextColor:String,gutter:String,padding:{type:String,default:"3px 2px"}}),emits:["update:modelValue"],setup(e,{emit:s}){const{proxy:o}=me(),{$q:m}=o,h=Se(e,m),r=n(()=>parseInt(e.min,10)),i=n(()=>parseInt(e.max,10)),b=n(()=>parseInt(e.maxPages,10)),v=n(()=>S.value+" / "+i.value),y=n(()=>Q(e.boundaryLinks,e.input)),u=n(()=>Q(e.boundaryNumbers,!e.input)),d=n(()=>Q(e.directionLinks,e.input)),f=n(()=>Q(e.ellipses,!e.input)),D=p(null),S=n({get:()=>e.modelValue,set:t=>{if(t=parseInt(t,10),e.disable||isNaN(t))return;const a=ke(t,r.value,i.value);e.modelValue!==a&&s("update:modelValue",a)}});R(()=>`${r.value}|${i.value}`,()=>{S.value=e.modelValue});const H=n(()=>"q-pagination row no-wrap items-center"+(e.disable===!0?" disabled":"")),M=n(()=>e.gutter in A?`${A[e.gutter]}px`:e.gutter||null),X=n(()=>M.value!==null?`--q-pagination-gutter-parent:-${M.value};--q-pagination-gutter-child:${M.value}`:null),N=n(()=>{const t=[e.iconFirst||m.iconSet.pagination.first,e.iconPrev||m.iconSet.pagination.prev,e.iconNext||m.iconSet.pagination.next,e.iconLast||m.iconSet.pagination.last];return m.lang.rtl===!0?t.reverse():t}),Z=n(()=>({"aria-disabled":e.disable===!0?"true":"false",role:"navigation"})),E=n(()=>ve(e,"flat")),ee=n(()=>({[E.value]:!0,round:e.round,rounded:e.rounded,padding:e.padding,color:e.color,textColor:e.textColor,size:e.size,ripple:e.ripple!==null?e.ripple:!0})),te=n(()=>{const t={[E.value]:!1};return e.activeDesign!==""&&(t[e.activeDesign]=!0),t}),ae=n(()=>T(x({},te.value),{color:e.activeColor||e.color,textColor:e.activeTextColor||e.textColor})),P=n(()=>{let t=Math.max(b.value,1+(f.value?2:0)+(u.value?2:0));const a={pgFrom:r.value,pgTo:i.value,ellipsesStart:!1,ellipsesEnd:!1,boundaryStart:!1,boundaryEnd:!1,marginalStyle:{minWidth:`${Math.max(2,String(i.value).length)}em`}};return b.value&&t<i.value-r.value+1&&(t=1+Math.floor(t/2)*2,a.pgFrom=Math.max(r.value,Math.min(i.value-t+1,e.modelValue-Math.floor(t/2))),a.pgTo=Math.min(i.value,a.pgFrom+t-1),u.value&&(a.boundaryStart=!0,a.pgFrom++),f.value&&a.pgFrom>r.value+(u.value?1:0)&&(a.ellipsesStart=!0,a.pgFrom++),u.value&&(a.boundaryEnd=!0,a.pgTo--),f.value&&a.pgTo<i.value-(u.value?1:0)&&(a.ellipsesEnd=!0,a.pgTo--)),a});function I(t){S.value=t}function le(t){S.value=S.value+t}const ne=n(()=>{function t(){S.value=D.value,D.value=null}return{"onUpdate:modelValue":a=>{D.value=a},onKeyup:a=>{fe(a,13)===!0&&t()},onBlur:t}});function w(t,a,B){const _=x(x({"aria-label":a,"aria-current":"false"},ee.value),t);return B===!0&&Object.assign(_,x({"aria-current":"true"},ae.value)),a!==void 0&&(e.toFn!==void 0?_.to=e.toFn(a):_.onClick=()=>{I(a)}),F(C,_)}return Object.assign(o,{set:I,setByOffset:le}),()=>{const t=[],a=[];let B;if(y.value===!0&&(t.push(w({key:"bls",disable:e.disable||e.modelValue<=r.value,icon:N.value[0]},r.value)),a.unshift(w({key:"ble",disable:e.disable||e.modelValue>=i.value,icon:N.value[3]},i.value))),d.value===!0&&(t.push(w({key:"bdp",disable:e.disable||e.modelValue<=r.value,icon:N.value[1]},e.modelValue-1)),a.unshift(w({key:"bdn",disable:e.disable||e.modelValue>=i.value,icon:N.value[2]},e.modelValue+1))),e.input!==!0){B=[];const{pgFrom:_,pgTo:O,marginalStyle:$}=P.value;if(P.value.boundaryStart===!0){const g=r.value===e.modelValue;t.push(w({key:"bns",style:$,disable:e.disable,label:r.value},r.value,g))}if(P.value.boundaryEnd===!0){const g=i.value===e.modelValue;a.unshift(w({key:"bne",style:$,disable:e.disable,label:i.value},i.value,g))}P.value.ellipsesStart===!0&&t.push(w({key:"bes",style:$,disable:e.disable,label:"\u2026",ripple:!1},_-1)),P.value.ellipsesEnd===!0&&a.unshift(w({key:"bee",style:$,disable:e.disable,label:"\u2026",ripple:!1},O+1));for(let g=_;g<=O;g++)B.push(w({key:`bpg${g}`,style:$,disable:e.disable,label:g},g,g===e.modelValue))}return F("div",x({class:H.value},Z.value),[F("div",{class:"q-pagination__content row no-wrap items-center",style:X.value},[...t,e.input===!0?F(_e,x({class:"inline",style:{width:`${v.value.length/1.5}em`},type:"number",dense:!0,value:D.value,disable:e.disable,dark:h.value,borderless:!0,inputClass:e.inputClass,inputStyle:e.inputStyle,placeholder:v.value,min:r.value,max:i.value},ne.value)):F("div",{class:"q-pagination__middle row justify-center"},B),...a])])}}});const Qe={tabindex:"0",class:"focus:tw-outline-none tw-text-sm tw-leading-none tw-text-gray-600 tw-h-16"},qe={class:"tw-w-1/3 tw-px-4"},Le={class:"tw-flex tw-items-center"},Me={class:"tw-w-10 tw-h-10 tw-bg-gray-700 tw-rounded-sm tw-flex tw-items-center tw-justify-center"},Te={class:"tw-text-xs tw-font-bold tw-leading-3 tw-text-white"},je={class:"tw-pl-2"},Ee={class:"tw-text-sm tw-font-medium tw-leading-none dark:tw-text-white"},Ie={class:"tw-text-xs tw-leading-3 tw-text-gray-400 tw-mt-2"},Oe={class:"tw-w-1/4 tw-px-4"},Ue={class:"tw-flex tw-items-center tw-text-gray-400"},ze={class:"tw-w-1/4 tw-px-4"},Ae={class:"tw-flex tw-items-center tw-text-gray-400"},Re={class:"tw-px-4"},Ke={class:"tw-w-min tw-flex tw-scale-75 md:tw-scale-100"},Je=Y("\u7F16\u8F91"),We=Y("\u5220\u9664\u7528\u6237"),Ye={class:"q-ml-sm"},Ge=K({props:{user:{type:Object,default:null}},emits:["modify"],setup(e,{emit:s}){const o=e,m=J(),h=De(o.user.name),r=()=>{s("modify",{})},i=async()=>{(await be({id:o.user.id})).meta.code===0&&(m.commit("success",{message:"\u5220\u9664\u6210\u529F"}),v.value=!1,s("modify",{}))},b=p(!1),v=p(!1);return(y,u)=>(q(),j(W,null,[l("tr",Qe,[l("td",qe,[l("div",Le,[l("div",Me,[l("p",Te,k(L(h)),1)]),l("div",je,[l("p",Ee,k(e.user.name),1),l("p",Ie,k(e.user.permissions.join(", ")||"-"),1)])])]),l("td",Oe,[l("div",Ue,k(e.user.account),1)]),l("td",ze,[l("div",Ae,k(L(Fe)(e.user.createTime*1e3)),1)]),l("td",Re,[l("div",Ke,[c(C,{color:"primary",class:"tw-mr-2 md:tw-mr-4","text-color":"black",onClick:u[0]||(u[0]=d=>b.value=!0)},{default:V(()=>[Je]),_:1}),c(C,{disable:e.user.id===1,flat:"",class:"tw-text-red-300",onClick:u[1]||(u[1]=d=>v.value=!0)},{default:V(()=>[We]),_:1},8,["disable"])])])]),c(Pe,{modelValue:v.value,"onUpdate:modelValue":u[2]||(u[2]=d=>v.value=d)},{default:V(()=>[c(Ve,null,{default:V(()=>[c(Ce,{class:"row items-center"},{default:V(()=>[c(ge,{icon:"delete",color:"red","text-color":"white"}),l("span",Ye,"\u662F\u5426\u8981\u5220\u9664\u7528\u6237 "+k(e.user.name),1)]),_:1}),c(Be,{align:"right"},{default:V(()=>[we(c(C,{flat:"",label:"\u53D6\u6D88"},null,512),[[$e]]),c(C,{flat:"",label:"\u5220\u9664",color:"red",onClick:i})]),_:1})]),_:1})]),_:1},8,["modelValue"]),c(G,{modelValue:b.value,"onUpdate:modelValue":u[3]||(u[3]=d=>b.value=d),user:e.user,onModify:r},null,8,["modelValue","user"])],64))}}),He={class:"tw-w-full tw-p-4"},Xe={class:"q-dark tw-w-full tw-rounded tw-overflow-hidden"},Ze={class:"tw-px-4 tw-py-4"},et={class:"tw-flex tw-items-center tw-justify-between"},tt=l("p",{tabindex:"0",class:"focus:tw-outline-none tw-text-base sm:tw-text-lg md:tw-text-xl lg:tw-text-2xl tw-font-bold tw-leading-normal tw-text-primary"}," \u7528\u6237\u7BA1\u7406 ",-1),at={class:"tw-mt-0"},lt={class:"q-dark tw-px-4 tw-pb-5 tw-min-h-50 tw-relative"},nt={class:"tw-overflow-x-auto"},st={class:"tw-w-full tw-whitespace-nowrap"},ot={class:"q-pa-lg flex flex-center"},_t=K({props:{orgId:{type:String,required:!0}},setup(e){const s=e,o=p(1),m=p(10),h=p(!1),r=J(),i=n(()=>r.state.Root.users),b=n(()=>{const u=r.state.Root.userTotal||0;return Math.ceil(u/m.value)}),v=p(!1),y=async()=>{v.value=!0;try{await r.dispatch("fetchUsers",{oid:s.orgId,page:o.value,pagesize:m.value})}catch(u){console.log(u)}v.value=!1};return y(),R(o,(u,d)=>{y()}),(u,d)=>(q(),j("div",He,[l("div",Xe,[l("div",Ze,[l("div",et,[tt,l("div",at,[c(C,{flat:"",class:"tw-text-white",icon:"add",onClick:d[0]||(d[0]=f=>h.value=!0)})])])]),l("div",lt,[l("div",nt,[l("table",st,[l("tbody",null,[(q(!0),j(W,null,ye(L(i),f=>(q(),xe(Ge,{key:f.id,user:f,onModify:y},null,8,["user"]))),128))])])]),c(he,{size:"md",showing:v.value},null,8,["showing"])]),l("div",ot,[c(Ne,{modelValue:o.value,"onUpdate:modelValue":d[1]||(d[1]=f=>o.value=f),color:"grey-4","active-color":"black",max:L(b),"boundary-numbers":!1},null,8,["modelValue","max"])]),c(G,{modelValue:h.value,"onUpdate:modelValue":d[2]||(d[2]=f=>h.value=f),onModify:y},null,8,["modelValue"])])]))}});export{_t as default};
